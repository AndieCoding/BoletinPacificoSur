import { Card } from './web-components/news-card.js';
let array = 
    {"status":"success","totalResults":45,"results":[{"article_id":"15226c958734c00662aceb06730f4194","title":"Asesinan a balazos a periodista en el occidente de México","link":"https://www.elvocero.com/el-mundo/latinoamerica/asesinan-a-balazos-a-periodista-en-el-occidente-de-m-xico/article_2a6e265a-9718-11ef-b052-9fa92df5c791.html","keywords":null,"creator":["Associated Press"],"video_url":null,"description":"Un periodista que dirigía un portal local de noticias fue asesinado a balazos en una localidad del occidente de México donde operan varios grupos delictivos que mantienen una lucha por el control del territorio.","content":"ONLY AVAILABLE IN PAID PLANS","pubDate":"2024-10-30 23:39:00","pubDateTZ":"UTC","image_url":"https://bloximages.newyork1.vip.townnews.com/elvocero.com/content/tncms/assets/v3/editorial/5/b7/5b7f968e-9718-11ef-b493-9bf19ccbd678/6722c406e243a.image.jpg?resize=300%2C200","source_id":"elvocero","source_priority":19419,"source_name":"El Vocero","source_url":"https://www.elvocero.com","source_icon":"https://i.bytvi.com/domain_icons/elvocero.png","language":"spanish","country":["puerto rico"],"category":["world"],"ai_tag":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment_stats":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","ai_region":"ONLY AVAILABLE IN CORPORATE PLANS","ai_org":"ONLY AVAILABLE IN CORPORATE PLANS","duplicate":true},{"article_id":"30fa6be659065bc72742f2b19fe5e3d3","title":"Bolivia: Arce exige a aliados de Morales levantar bloqueos de carreteras y advierte con ejercer otras medidas","link":"https://elcomercio.pe/mundo/latinoamerica/bolivia-luis-arce-exige-a-aliados-de-evo-morales-levantar-bloqueos-de-carreteras-y-advierte-con-ejercer-otras-medidas-cochabamba-mas-ultimas-noticia/","keywords":null,"creator":null,"video_url":null,"description":"El presidente de Bolivia, Luis Arce, exigió este miércoles a los sectores afines al exmandatario Evo Morales (2006-2019) que levanten los bloqueos de carreteras que realizan desde hace 17 días y advirtió con ejercer medidas “constitucionales” para “precautelar” el bienestar del país.","content":"ONLY AVAILABLE IN PAID PLANS","pubDate":"2024-10-30 22:50:09","pubDateTZ":"UTC","image_url":"https://elcomercio.pe/resizer/v2/YR6GY4KXLFENFDZKD4FS23SIH4.jpg?auth=7b50da799d433f67296e5f818408875dfd50d5cb8e1b29f916b0af3166238fd4&height=528&quality=75&smart=true&width=980","source_id":"elcomercio","source_priority":3365,"source_name":"El Comercio Perú","source_url":"https://elcomercio.pe","source_icon":"https://i.bytvi.com/domain_icons/elcomercio.png","language":"spanish","country":["peru"],"category":["world"],"ai_tag":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment_stats":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","ai_region":"ONLY AVAILABLE IN CORPORATE PLANS","ai_org":"ONLY AVAILABLE IN CORPORATE PLANS","duplicate":false},{"article_id":"49cb6fb22ecc6ee6897e6081e930111e","title":"Javier Milei despidió a su canciller tras voto de Argentina a favor de Cuba en la ONU","link":"https://www.eltiempo.com/mundo/latinoamerica/javier-milei-despidio-a-su-canciller-tras-voto-de-argentina-a-favor-de-cuba-en-la-onu-3395361","keywords":["latinoamérica"],"creator":null,"video_url":null,"description":"El mandatario destituyó a Diana Mondino y puso en el cargo a Gerardo Werthein.","content":"ONLY AVAILABLE IN PAID PLANS","pubDate":"2024-10-30 21:57:13","pubDateTZ":"UTC","image_url":"https://imagenes.eltiempo.com/files/og_thumbnail/files/fp/uploads/2024/04/01/660b171b6d74b.r_d.496-502-0.jpeg","source_id":"eltiempocl","source_priority":3806,"source_name":"Eltiempo","source_url":"https://www.eltiempo.com","source_icon":"https://i.bytvi.com/domain_icons/eltiempocl.png","language":"spanish","country":["singapore"],"category":["world"],"ai_tag":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment_stats":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","ai_region":"ONLY AVAILABLE IN CORPORATE PLANS","ai_org":"ONLY AVAILABLE IN CORPORATE PLANS","duplicate":false},{"article_id":"17055b2c35af6ccb8fd97869dfda485b","title":"Venden la Casa Curutchet, la gran obra maestra de Le Corbusier en Latinoamérica, al Colegio de Arquitectos de la provincia","link":"https://www.lanacion.com.ar/cultura/venden-la-casa-curutchet-la-gran-obra-maestra-de-le-corbusier-en-latinoamerica-al-colegio-de-nid30102024/","keywords":["cultura"],"creator":["Vivian Urfeig"],"video_url":null,"description":"Declarado Patrimonio de la Humanidad por la Unesco, el emblemático edificio de interés cultural en La Plata, ya lo alquila la misma entidad que lo habría sido adquirido por unos dos millones de dólares; los planes a futuro","content":"ONLY AVAILABLE IN PAID PLANS","pubDate":"2024-10-30 21:51:28","pubDateTZ":"UTC","image_url":"https://resizer.glanacion.com/resizer/v2/DXWQTVDQFREBPK4NPLSQWHFMHY.jpg?auth=6b96c0a483d59475bba37729f13eb7402c8bb69e0c4e3cf9acaf6e6527fa7c5a&height=1300&smart=true&width=2000","source_id":"lanacion","source_priority":7204,"source_name":"La Nacion","source_url":"https://www.lanacion.com.ar","source_icon":"https://i.bytvi.com/domain_icons/lanacion.png","language":"spanish","country":["argentina"],"category":["top"],"ai_tag":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment_stats":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","ai_region":"ONLY AVAILABLE IN CORPORATE PLANS","ai_org":"ONLY AVAILABLE IN CORPORATE PLANS","duplicate":false},{"article_id":"a54e3f5a0f6c9867d13fb847c51e996b","title":"Milei despidió a su canciller tras voto de Argentina a favor de Cuba en la ONU","link":"https://elcomercio.pe/mundo/latinoamerica/javier-milei-despidio-a-su-canciller-diana-mondino-tras-voto-de-argentina-a-favor-de-cuba-en-la-onu-gerardo-werthein-estados-unidos-manuel-adorni-ultimas-noticia/","keywords":null,"creator":null,"video_url":null,"description":"El presidente argentino Javier Milei destituyó a su canciller, Diana Mondino y la reemplazó por el embajador en Washington, luego de que Argentina votara este miércoles en la ONU en contra del embargo a Cuba impuesto hace décadas por Estados Unidos, informó el portavoz de presidencia.","content":"ONLY AVAILABLE IN PAID PLANS","pubDate":"2024-10-30 21:30:24","pubDateTZ":"UTC","image_url":"https://elcomercio.pe/resizer/v2/ZQ2YWMFJCJCELEO3STZO5ARWAE.jpg?auth=aba830626c0913e1717efabb1f6ad389f34428a11e85ae658d20cb0a1c7e0a50&height=528&quality=75&smart=true&width=980","source_id":"elcomercio","source_priority":3365,"source_name":"El Comercio Perú","source_url":"https://elcomercio.pe","source_icon":"https://i.bytvi.com/domain_icons/elcomercio.png","language":"spanish","country":["peru"],"category":["world"],"ai_tag":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment_stats":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","ai_region":"ONLY AVAILABLE IN CORPORATE PLANS","ai_org":"ONLY AVAILABLE IN CORPORATE PLANS","duplicate":false},{"article_id":"3c43bf3312aade7d61750aac09d56eae","title":"Bolivia: Fiscal asegura que ya tiene “pruebas materiales” en caso de trata y estupro contra Morales","link":"https://elcomercio.pe/mundo/latinoamerica/bolivia-fiscal-asegura-que-ya-tiene-pruebas-materiales-en-caso-de-trata-y-estupro-contra-evo-morales-luis-arce-ultimas-noticia/","keywords":null,"creator":null,"video_url":null,"description":"La fiscal departamental de Tarija, Sandra Gutiérrez, afirmó este miércoles que ya tiene “pruebas materiales” en el caso por trata de personas y estupro en contra del expresidente de Bolivia, Evo Morales (2006-2019), luego de 19 días del anuncio que hizo sobre una orden de aprehensión en contra del exmandatario, medida que aún no se cumple.","content":"ONLY AVAILABLE IN PAID PLANS","pubDate":"2024-10-30 18:46:46","pubDateTZ":"UTC","image_url":"https://elcomercio.pe/resizer/v2/HKCPX7LJVBGTTJWCA6VPK2OQTY.jpg?auth=2123f564456d6fc0f2b48f885c9a1ed8b807cf66d8dc758913678a3cf48bdf06&height=528&quality=75&smart=true&width=980","source_id":"elcomercio","source_priority":3365,"source_name":"El Comercio Perú","source_url":"https://elcomercio.pe","source_icon":"https://i.bytvi.com/domain_icons/elcomercio.png","language":"spanish","country":["peru"],"category":["world"],"ai_tag":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment_stats":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","ai_region":"ONLY AVAILABLE IN CORPORATE PLANS","ai_org":"ONLY AVAILABLE IN CORPORATE PLANS","duplicate":false},{"article_id":"f83bdda5e71c597649549eb0ef64b9b8","title":"Tragedia en España: Colombia confirma 2 desaparecidos en Valencia, pero por ahora no hay fallecidos","link":"https://elcomercio.pe/mundo/latinoamerica/la-dana-en-espana-valencia-tragedia-en-espana-colombia-confirma-2-desaparecidos-en-valencia-pero-por-ahora-no-hay-fallecidos-gustavo-petro-pedro-sanchez-ultimas-noticia/","keywords":null,"creator":null,"video_url":null,"description":"El Gobierno de Colombia informó este miércoles que “hasta el momento” no hay colombianos identificados entre los fallecidos en Valencia por la dana que asoló esa región del este de España, aunque hay dos connacionales desaparecidos por la tormenta que deja al menos 70 muertos.","content":"ONLY AVAILABLE IN PAID PLANS","pubDate":"2024-10-30 16:37:19","pubDateTZ":"UTC","image_url":"https://elcomercio.pe/resizer/v2/EJ2C2Y3XCBBMVCO3E5FX52RVMU.jpg?auth=df009acc896110fa10c470ab67a54bf13f32e3848f4c9336e0e66ef28769d552&height=528&quality=75&smart=true&width=980","source_id":"elcomercio","source_priority":3365,"source_name":"El Comercio Perú","source_url":"https://elcomercio.pe","source_icon":"https://i.bytvi.com/domain_icons/elcomercio.png","language":"spanish","country":["peru"],"category":["world"],"ai_tag":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment_stats":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","ai_region":"ONLY AVAILABLE IN CORPORATE PLANS","ai_org":"ONLY AVAILABLE IN CORPORATE PLANS","duplicate":false},{"article_id":"f539a0f6cb5d119240cab8c3a724d54d","title":"Evo Morales asegura que si es capturado habrá un “levantamiento” indígena y militar en Bolivia","link":"https://elcomercio.pe/mundo/latinoamerica/evo-morales-asegura-que-si-es-capturado-habra-un-levantamiento-indigena-y-militar-en-bolivia-luis-arce-cochabamba-chapare-bloqueos-de-caminos-carreteras-noticia/","keywords":null,"creator":null,"video_url":null,"description":"Evo Morales | Bolivia | El líder cocalero está atrincherado desde hace 17 días en la región del Chapare, su bastión político y sindical, durante los cuales sus seguidores empezaron a bloquear las carreteras principales en el centro del país","content":"ONLY AVAILABLE IN PAID PLANS","pubDate":"2024-10-30 15:29:16","pubDateTZ":"UTC","image_url":"https://elcomercio.pe/resizer/v2/YGXU4OUPUVC2XIEAKUFPS6U6JE.jpg?auth=3074b2375ae2d38dd2007cdbde547195345e9b3f013826674de68a88c193c676&height=528&quality=75&smart=true&width=980","source_id":"elcomercio","source_priority":3365,"source_name":"El Comercio Perú","source_url":"https://elcomercio.pe","source_icon":"https://i.bytvi.com/domain_icons/elcomercio.png","language":"spanish","country":["peru"],"category":["world"],"ai_tag":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment_stats":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","ai_region":"ONLY AVAILABLE IN CORPORATE PLANS","ai_org":"ONLY AVAILABLE IN CORPORATE PLANS","duplicate":false},{"article_id":"a39de6da6fadb245448b038268cb0413","title":"Argentina: caos en Buenos Aires por la huelga del transporte aéreo, trenes, metro y taxis","link":"https://elcomercio.pe/mundo/latinoamerica/argentina-caos-en-buenos-aires-por-la-huelga-del-transporte-aereo-trenes-metro-y-taxis-javier-milei-ultimas-noticia/","keywords":null,"creator":null,"video_url":null,"description":"La ciudad de Buenos Aires amaneció este miércoles con largas filas en las paradas de autobuses, el único medio de transporte que opera en la capital argentina a causa de una huelga de 24 horas que afecta a los aviones, trenes, metro capitalino (Subte) y taxis.","content":"ONLY AVAILABLE IN PAID PLANS","pubDate":"2024-10-30 15:01:16","pubDateTZ":"UTC","image_url":"https://elcomercio.pe/resizer/v2/EIGDPKND5ZEQVORU3AQ32RQ66I.jpg?auth=78a0dcd84749770bcfb24a07a401c2e1bfe867fd625bf9626c0c7783c5036ff0&height=528&quality=75&smart=true&width=980","source_id":"elcomercio","source_priority":3365,"source_name":"El Comercio Perú","source_url":"https://elcomercio.pe","source_icon":"https://i.bytvi.com/domain_icons/elcomercio.png","language":"spanish","country":["peru"],"category":["world"],"ai_tag":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment_stats":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","ai_region":"ONLY AVAILABLE IN CORPORATE PLANS","ai_org":"ONLY AVAILABLE IN CORPORATE PLANS","duplicate":false},{"article_id":"adb45d070be26dec1d0a9a28d3242632","title":"Líderes periodísticos de la región serán capacitados en gestión de productos editoriales","link":"https://www.eltiempo.com/mundo/latinoamerica/lideres-periodisticos-de-la-region-seran-capacitados-en-gestion-de-productos-editoriales-3395101","keywords":["latinoamérica"],"creator":null,"video_url":null,"description":"Participarán en un programa desarrollado para el Grupo de Diarios América por la News Product Alliance, con apoyo de Google News Initiative.","content":"ONLY AVAILABLE IN PAID PLANS","pubDate":"2024-10-30 12:45:00","pubDateTZ":"UTC","image_url":"https://imagenes.eltiempo.com/files/image_1200_600/uploads/2024/10/30/67222770ef59a.jpeg","source_id":"eltiempocl","source_priority":3806,"source_name":"Eltiempo","source_url":"https://www.eltiempo.com","source_icon":"https://i.bytvi.com/domain_icons/eltiempocl.png","language":"spanish","country":["singapore"],"category":["world"],"ai_tag":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","sentiment_stats":"ONLY AVAILABLE IN PROFESSIONAL AND CORPORATE PLANS","ai_region":"ONLY AVAILABLE IN CORPORATE PLANS","ai_org":"ONLY AVAILABLE IN CORPORATE PLANS","duplicate":true}],"nextPage":"1730292300582678009"}
;
//let news;
localStorage.setItem('data', JSON.stringify(array));
let data = JSON.parse(localStorage.getItem('data'));
//console.log(news);
document.addEventListener('DOMContentLoaded',async function() {
    //const response = await fetch('https://newsdata.io/api/1/latest?apikey=pub_5499177442a5584cfd595803f4561f74f84a5&q=latinoamerica');    
    //const data = await response.json();
    //console.log(data);
    //localStorage.setItem('data', JSON.stringify(data));
    let news = data.results.map(article => (article.image == null) ? null : new Card(article));
    //let news = data.map(article => (article.image == null) ? null : new Card(article));
    news = data.results
                .map(article => (article.image_url == null || article.description == null) ? null : new Card(article))  
                .filter(article => article !== null);  
    const firstCard = news.shift();        
    firstCard.setAttribute('image_url', firstCard.image);
    firstCard.setAttribute('pub_date', firstCard.fecha);        
    firstCard.setAttribute('description', firstCard.descripcion);
    firstCard.setAttribute('source_name', firstCard.autor);
    firstCard.setAttribute('link', firstCard.link);
    document.querySelector('#portada').appendChild(firstCard);

    news.forEach(card => {        
        card.classList.add('noticia');
        card.setAttribute('image_url', card.image);
        card.setAttribute('pub_date', card.fecha);        
        card.setAttribute('description', card.descripcion);
        card.setAttribute('source_name', card.autor);
        card.setAttribute('link', card.link);
        document.querySelector('.noticias').appendChild(card)
    });
});